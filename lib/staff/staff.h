/*=====================================================================================
 * Description:
 *    ESP32
 *====================================================================================*/
#ifndef _STAFF_H_
#define _STAFF_H_

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include "esp_err.h"


/* Параметры функции:
.
*/

#ifdef __cplusplus
extern "C"
{
#endif

/*
 * @return - ESP_OK при успешном выполнении
 *           ESP_ERR_INVALID_ARG при невалидных аргументах
 *           ESP_ERR_INVALID_SIZE при несоответствии размеров буферов
 * */


/* Ключевые особенности:
Проверка аргументов:
Проверяет указатели на буфер и длину на NULL
Убеждается, что исходная длина в диапазоне 4-500 байт

Алгоритм обработки:
Использует два указателя (чтение и запись) для обработки за один проход
Пропускает байты 0x10, за которыми сразу следует целевой байт
Сохраняет все остальные байты

Эффективность:
Работает за минимум времени
Не использует дополнительную память
Модифицирует буфер на месте

Корректная обработка граничных случаев:
Автоматически обрабатывает конец буфера
Корректно работает с последовательными удалениями
*/

bool staffProcess(const uint8_t *src, uint8_t *dest, size_t src_len, size_t dest_max_len, size_t *dest_actual_len);

esp_err_t deStaff(uint8_t *buffer, size_t *length); 

#ifdef __cplusplus
}
#endif

#endif  // _STAFF_H_
